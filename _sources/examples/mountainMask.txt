.. _mountainMask:

Partially Hidden credits
-----------------------------------

.. raw:: html

        <div style="position: relative; padding-bottom: 56.25%; padding-top: 30px; margin-bottom:30px; height: 0; overflow: hidden; margin-left: 5%;"><iframe src="https://youtube.com/embed/NsTgBah6Ebk&hl=en_US&fs=1&rel=0" frameborder="0" allowfullscreen style="position: absolute; top: 0; bottom: 10; width: 90%; height: 100%;"></iframe></div>

First, see in :ref:`autocredits` how to make credits automatically with MoviePy. Before seeing the code for this video, here is a tutorial video that explains the different steps (also made with MoviePy):

.. raw:: html

        <div style="position: relative; padding-bottom: 56.25%; padding-top: 30px; margin-bottom:30px; height: 0; overflow: hidden; margin-left: 5%;"><iframe src="https://youtube.com/embed/7tKABfc0Yzw&hl=en_US&fs=1&rel=0" frameborder="0" allowfullscreen style="position: absolute; top: 0; bottom: 10; width: 90%; height: 100%;"></iframe></div>





And here is the code: ::

    from moviepy import *

    # Load the mountains clip, cut it, slow it down, make it look darker
    clip = VideoFileClip('./mountain.mov',audio=False).subclip(37,46).speedx(0.4)
    clip = clip.fl_image(lambda pic: (0.7*pic).astype('uint8'))

    # Save the first frame to later make a mask with GIMP (only once)
    # clip.save_frame('mountain.png')

    # Load the mountain mask made with GIMP
    mountainmask = ImageClip('./credits/mountainMask2.png',ismask=True)

    # Generate the credits from a text file
    credits = make_credits('./credits/credits.txt',3*clip.w/4)

    # Make the credits scroll. Here, 10 pixels per second
    mov_credits= CompositeVideoClip(clip.size,[
                    clip,
                    credits.set_pos(lambda t:('center',-10*t)),
                    clip.set_mask(mountainmask)])

    final = CompositeVideoClip(clip.size,[clip,mov_credits.set_end(25)])
    final.subclip(8,15).to_videofile("credits_mount.avi",fps=24,codec='DIVX')
