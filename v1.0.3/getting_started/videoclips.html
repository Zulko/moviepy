

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Creating and exporting video clips &mdash; MoviePy  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Gallery" href="../gallery.html" />
    <link rel="prev" title="Audio in MoviePy" href="audioclips.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> MoviePy
          

          
            
            <img src="../_static/logo_small.jpeg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Download and Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="getting_started.html">Getting started with MoviePy</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quick_presentation.html">Quick presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="compositing.html">Mixing clips</a></li>
<li class="toctree-l2"><a class="reference internal" href="effects.html">Clips transformations and effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="efficient_moviepy.html">How to be efficient with MoviePy</a></li>
<li class="toctree-l2"><a class="reference internal" href="working_with_matplotlib.html">Working with <cite>matplotlib</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="audioclips.html">Audio in MoviePy</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Creating and exporting video clips</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#categories-of-video-clips">Categories of video clips</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#videoclip">VideoClip</a></li>
<li class="toctree-l4"><a class="reference internal" href="#videofileclip">VideoFileClip</a></li>
<li class="toctree-l4"><a class="reference internal" href="#imagesequenceclip">ImageSequenceClip</a></li>
<li class="toctree-l4"><a class="reference internal" href="#imageclip">ImageClip</a></li>
<li class="toctree-l4"><a class="reference internal" href="#textclip">TextClip</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#mask-clips">Mask clips</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exporting-video-clips">Exporting video clips</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#video-files-mp4-webm-ogv">Video files (.mp4, .webm, .ogv…)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#animated-gifs">Animated GIFs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#export-images">Export images</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gallery.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/examples.html">Example Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">Moviepy Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../opencv_instructions.html">So you want to install OpenCV 2.4.6 ?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">FAQ and troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tools/advanced_tools.html">Advanced tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref/ref.html">Reference Manual</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MoviePy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="getting_started.html">Getting started with MoviePy</a> &raquo;</li>
        
      <li>Creating and exporting video clips</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/getting_started/videoclips.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-and-exporting-video-clips">
<span id="videoclips"></span><h1>Creating and exporting video clips<a class="headerlink" href="#creating-and-exporting-video-clips" title="Permalink to this headline">¶</a></h1>
<p>Video and audio clips are the central objects of MoviePy. In this section we present the different sorts of clips, how to create them, and how to write them to a file. For informations on modifying a clip (cuts, effects, etc.), see <a class="reference internal" href="effects.html#effects"><span class="std std-ref">Clips transformations and effects</span></a>. For how to put clips together see <a class="reference internal" href="compositing.html#compositevideoclips"><span class="std std-ref">Mixing clips</span></a> and to see how to preview clips before writing a file, refer to <a class="reference internal" href="efficient_moviepy.html#efficient"><span class="std std-ref">How to be efficient with MoviePy</span></a>.</p>
<p>The following code summarizes the base clips that you can create with moviepy:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># VIDEO CLIPS</span>
<span class="n">clip</span> <span class="o">=</span> <span class="n">VideoClip</span><span class="p">(</span><span class="n">make_frame</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># for custom animations (see below)</span>
<span class="n">clip</span> <span class="o">=</span> <span class="n">VideoFileClip</span><span class="p">(</span><span class="s2">&quot;my_video_file.mp4&quot;</span><span class="p">)</span> <span class="c1"># or .avi, .webm, .gif ...</span>
<span class="n">clip</span> <span class="o">=</span> <span class="n">ImageSequenceClip</span><span class="p">([</span><span class="s1">&#39;image_file1.jpeg&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">fps</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>
<span class="n">clip</span> <span class="o">=</span> <span class="n">ImageClip</span><span class="p">(</span><span class="s2">&quot;my_picture.png&quot;</span><span class="p">)</span> <span class="c1"># or .jpeg, .tiff, ...</span>
<span class="n">clip</span> <span class="o">=</span> <span class="n">TextClip</span><span class="p">(</span><span class="s2">&quot;Hello !&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="s2">&quot;Amiri-Bold&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="n">clip</span> <span class="o">=</span> <span class="n">ColorClip</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">460</span><span class="p">,</span><span class="mi">380</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="n">R</span><span class="p">,</span><span class="n">G</span><span class="p">,</span><span class="n">B</span><span class="p">])</span>

<span class="c1"># AUDIO CLIPS</span>
<span class="n">clip</span> <span class="o">=</span> <span class="n">AudioFileClip</span><span class="p">(</span><span class="s2">&quot;my_audiofile.mp3&quot;</span><span class="p">)</span> <span class="c1"># or .ogg, .wav... or a video !</span>
<span class="n">clip</span> <span class="o">=</span> <span class="n">AudioArrayClip</span><span class="p">(</span><span class="n">numpy_array</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="mi">44100</span><span class="p">)</span> <span class="c1"># from a numerical array</span>
<span class="n">clip</span> <span class="o">=</span> <span class="n">AudioClip</span><span class="p">(</span><span class="n">make_frame</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># uses a function make_frame(t)</span>
</pre></div>
</div>
<p>The best to understand these clips is to read the full documentation for each in the <a class="reference internal" href="../ref/ref.html#reference-manual"><span class="std std-ref">Reference Manual</span></a>. The next sections
In this section we see how to create clips, (for instance from video or audio files), how to mix them together, and how to write them to a file.</p>
<div class="section" id="categories-of-video-clips">
<h2>Categories of video clips<a class="headerlink" href="#categories-of-video-clips" title="Permalink to this headline">¶</a></h2>
<p>Video clips are the building blocks of longer videos. Technically, they are clips with a <code class="docutils literal notranslate"><span class="pre">clip.get_frame(t)</span></code> method which outputs a HxWx3 numpy array representing the frame of the clip at time <em>t</em>. There are two main categories: animated clips (made with <code class="docutils literal notranslate"><span class="pre">VideoFileClip</span></code> and <code class="docutils literal notranslate"><span class="pre">VideoClip</span></code>) and unanimated clips which show the same picture for an a-priori infinite duration (<code class="docutils literal notranslate"><span class="pre">ImageClip</span></code>, <code class="docutils literal notranslate"><span class="pre">TextClip</span></code>,``ColorClip``). There are also special video clips call masks, which belong to the categories above but output greyscale frames indicating which parts of another clip are visible or not. A video clip can carry around an audio clip (<code class="docutils literal notranslate"><span class="pre">clip.audio</span></code>) which is its <em>soundtrack</em>, and a mask clip.</p>
<div class="section" id="videoclip">
<h3>VideoClip<a class="headerlink" href="#videoclip" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">VideoClip</span></code> is the base class for all the other video clips in MoviePy. If all you want is to edit video files, you will never need it. This class is practical when you want to make animations from frames that are generated by another library. All you need is to define a function <code class="docutils literal notranslate"><span class="pre">make_frame(t)</span></code> which returns a HxWx3 numpy array (of 8-bits integers) representing the frame at time t. Here is an example with the graphics library Gizeh:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gizeh</span>
<span class="kn">import</span> <span class="nn">moviepy.editor</span> <span class="k">as</span> <span class="nn">mpy</span>

<span class="k">def</span> <span class="nf">make_frame</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="n">surface</span> <span class="o">=</span> <span class="n">gizeh</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">)</span> <span class="c1"># width, height</span>
    <span class="n">radius</span> <span class="o">=</span> <span class="n">W</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span> <span class="p">(</span><span class="n">t</span><span class="o">*</span><span class="p">(</span><span class="mi">2</span><span class="o">-</span><span class="n">t</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span> <span class="p">)</span><span class="o">/</span><span class="mi">6</span> <span class="c1"># the radius varies over time</span>
    <span class="n">circle</span> <span class="o">=</span> <span class="n">gizeh</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="mi">64</span><span class="p">,</span><span class="mi">64</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">circle</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">surface</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">surface</span><span class="o">.</span><span class="n">get_npimage</span><span class="p">()</span> <span class="c1"># returns a 8-bit RGB array</span>

<span class="n">clip</span> <span class="o">=</span> <span class="n">mpy</span><span class="o">.</span><span class="n">VideoClip</span><span class="p">(</span><span class="n">make_frame</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># 2 seconds</span>
<span class="n">clip</span><span class="o">.</span><span class="n">write_gif</span><span class="p">(</span><span class="s2">&quot;circle.gif&quot;</span><span class="p">,</span><span class="n">fps</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/circle.gif"><img alt="../_images/circle.gif" class="align-center" src="../_images/circle.gif" style="width: 128px;" /></a>
<p>Note that clips make with a <cite>make_frame</cite> do not have an explicit frame rate, so you must provide a frame rate (<code class="docutils literal notranslate"><span class="pre">fps</span></code>, frames er second) for <code class="docutils literal notranslate"><span class="pre">write_gif</span></code> and <code class="docutils literal notranslate"><span class="pre">write_videofile</span></code>, and more generally for any methods that requires iterating through the frames.</p>
</div>
<div class="section" id="videofileclip">
<h3>VideoFileClip<a class="headerlink" href="#videofileclip" title="Permalink to this headline">¶</a></h3>
<p>A VideoFileClip is a clip read from a video file (most formats are supported) or a GIF file. You load the video as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myclip</span> <span class="o">=</span> <span class="n">VideoFileClip</span><span class="p">(</span><span class="s2">&quot;some_video.avi&quot;</span><span class="p">)</span>
<span class="n">myclip</span> <span class="o">=</span> <span class="n">VideoFileClip</span><span class="p">(</span><span class="s2">&quot;some_animation.gif&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that these clips will have an <code class="docutils literal notranslate"><span class="pre">fps</span></code> (frame per second) attribute, which will be transmitted if you do small modifications of the clip, and will be used by default in <code class="docutils literal notranslate"><span class="pre">write_videofile</span></code>, <code class="docutils literal notranslate"><span class="pre">write_gif</span></code>, etc. For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myclip</span> <span class="o">=</span> <span class="n">VideoFileClip</span><span class="p">(</span><span class="s2">&quot;some_video.avi&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">myclip</span><span class="o">.</span><span class="n">fps</span><span class="p">)</span> <span class="c1"># prints for instance &#39;30&#39;</span>
<span class="c1"># Now cut the clip between t=10 and 25 secs. This conserves the fps.</span>
<span class="n">myclip2</span> <span class="o">=</span> <span class="n">myclip</span><span class="o">.</span><span class="n">subclip</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
<span class="n">myclip2</span><span class="o">.</span><span class="n">write_gif</span><span class="p">(</span><span class="s2">&quot;test.gif&quot;</span><span class="p">)</span> <span class="c1"># the gif will have 30 fps</span>
</pre></div>
</div>
<p>For more, see <a class="reference internal" href="../ref/VideoClip/VideoClip.html#moviepy.video.io.VideoFileClip.VideoFileClip" title="moviepy.video.io.VideoFileClip.VideoFileClip"><code class="xref py py-class docutils literal notranslate"><span class="pre">VideoFileClip</span></code></a>.</p>
</div>
<div class="section" id="imagesequenceclip">
<h3>ImageSequenceClip<a class="headerlink" href="#imagesequenceclip" title="Permalink to this headline">¶</a></h3>
<p>This is a clip made from a series of images, you call it with</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">clip</span> <span class="o">=</span> <span class="n">ImageSequenceClip</span><span class="p">(</span><span class="n">images_list</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">images_list</span></code> can be either a list of image names (that will be <em>played</em>) in that order, a folder name (at which case all the image files in the folder will be played in alphanumerical order), or a list of frames (Numpy arrays), obtained for instance from other clips.</p>
<p>When you provide a folder name or list of file names, you can choose <code class="docutils literal notranslate"><span class="pre">load_images=True</span></code> to specify that all images should be loaded into the RAM. This is only interesting if you have a small number of images that will be each used more than once (e.g. if the images form a looping animation).</p>
</div>
<div class="section" id="imageclip">
<h3>ImageClip<a class="headerlink" href="#imageclip" title="Permalink to this headline">¶</a></h3>
<p>An ImageClip is a video clip that always displays the same image. You can create one as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myclip</span> <span class="o">=</span> <span class="n">ImageClip</span><span class="p">(</span><span class="s2">&quot;some_picture.jpeg&quot;</span><span class="p">)</span>
<span class="n">myclip</span> <span class="o">=</span> <span class="n">ImageClip</span><span class="p">(</span><span class="n">somme_array</span><span class="p">)</span> <span class="c1"># a (height x width x 3) RGB numpy array</span>
<span class="n">myclip</span> <span class="o">=</span> <span class="n">some_video_clip</span><span class="o">.</span><span class="n">to_ImageClip</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="s1">&#39;01:00:00&#39;</span><span class="p">)</span> <span class="c1"># frame at t=1 hour.</span>
</pre></div>
</div>
<p>For more, see <a class="reference internal" href="../ref/VideoClip/VideoClip.html#moviepy.video.VideoClip.ImageClip" title="moviepy.video.VideoClip.ImageClip"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageClip</span></code></a>.</p>
<p>Two examples of ImageClip shown below are the TextClip and ColorClip</p>
</div>
<div class="section" id="textclip">
<h3>TextClip<a class="headerlink" href="#textclip" title="Permalink to this headline">¶</a></h3>
<p>Generating a TextClip requires to have ImageMagick installed and (for windows users) linked to MoviePy, see the installation instructions.</p>
<p>Here is how you make a textclip (you won’t need all these options all the time):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myclip</span> <span class="o">=</span> <span class="n">TextClip</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="s1">&#39;Amiri-Bold&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The font can be any font installed on your computer, but ImageMagick will have specific names for it. For instance the <em>normal</em> Amiri font will be called <code class="docutils literal notranslate"><span class="pre">Amiri-Regular</span></code> while the Impact font will be called <code class="docutils literal notranslate"><span class="pre">Impact-Normal</span></code>. To get a list of the possible fonts, type <code class="docutils literal notranslate"><span class="pre">TextClip.list('font')</span></code>. To find all the font names related to a given font, use for instance</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TextClip</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;Amiri&#39;</span><span class="p">,</span> <span class="s1">&#39;font&#39;</span><span class="p">)</span> <span class="c1"># Returns all font names containing Amiri</span>
</pre></div>
</div>
<p>Note also that the use of a stroke (or contour) will not work well on small letters, so if you need a small text with a contour, it is better to generate a big text, then downsize it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myclip</span> <span class="o">=</span> <span class="n">TextClip</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span> <span class="n">stroke_width</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
<p>TextClips have many, many options: alignment, kerning (distance between the letters), stroke size, background, word wrapping, etc. see <a class="reference internal" href="../ref/VideoClip/VideoClip.html#moviepy.video.VideoClip.TextClip" title="moviepy.video.VideoClip.TextClip"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextClip</span></code></a> for more.</p>
</div>
</div>
<div class="section" id="mask-clips">
<h2>Mask clips<a class="headerlink" href="#mask-clips" title="Permalink to this headline">¶</a></h2>
<p>A mask is a special video clip which indicates which pixels will be visible when a video clip carrying this mask will be composed with other video clips (see <a class="reference internal" href="compositing.html#compositevideoclips"><span class="std std-ref">Mixing clips</span></a>). Masks are also used to define transparency when you export the clip as GIF file or as a PNG.</p>
<p>The fundamental difference between masks and standard clips is that standard clips output frames with 3 components (R-G-B) per pixel, comprised between 0 and 255, while a mask has just one composant per pixel, between 0 and 1 (1 indicating a fully visible pixel and 0 a transparent pixel). Seen otherwise, a mask is always in greyscale.</p>
<p>When you create or load a clip that you will use as a mask you need to declare it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">maskclip</span> <span class="o">=</span> <span class="n">VideoClip</span><span class="p">(</span><span class="n">makeframe</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">ismask</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">maskclip</span> <span class="o">=</span> <span class="n">ImageClip</span><span class="p">(</span><span class="s2">&quot;my_mask.jpeg&quot;</span><span class="p">,</span> <span class="n">ismask</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">maskclip</span> <span class="o">=</span> <span class="n">VideoFileClip</span><span class="p">(</span><span class="s2">&quot;myvideo.mp4&quot;</span><span class="p">,</span> <span class="n">ismask</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>In the case of video and image files, if these are not already black and white they will be converted automatically.</p>
<p>Then you attach this mask to a clip (which must have the same dimensions) with <code class="docutils literal notranslate"><span class="pre">myclip.set_mask(maskclip)</span></code>.</p>
<p>Some image formats like PNG support transparency with an <em>alpha layer</em>, which MoviePy will use as a mask:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myclip</span> <span class="o">=</span> <span class="n">ImageClip</span><span class="p">(</span><span class="s2">&quot;image.png&quot;</span><span class="p">,</span> <span class="n">transparent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># True is the default</span>
<span class="n">myclip</span><span class="o">.</span><span class="n">mask</span> <span class="c1"># &lt;- the alpha layer of the picture.</span>
</pre></div>
</div>
<p>Any video clip can be turned into a mask with <code class="docutils literal notranslate"><span class="pre">clip.to_mask()</span></code>, and a mask can be turned to a standard RGB video clip with <code class="docutils literal notranslate"><span class="pre">my_mask_clip.to_RGB()</span></code>.</p>
<p>Masks are treated differently by many methods (because their frames are different) but you can do with a mask pretty much everything you can do with a standard clip: you can cut it, edit it, preview it, write it to a video file, make snapshots, etc.</p>
</div>
<div class="section" id="exporting-video-clips">
<span id="renderingaclip"></span><h2>Exporting video clips<a class="headerlink" href="#exporting-video-clips" title="Permalink to this headline">¶</a></h2>
<div class="section" id="video-files-mp4-webm-ogv">
<h3>Video files (.mp4, .webm, .ogv…)<a class="headerlink" href="#video-files-mp4-webm-ogv" title="Permalink to this headline">¶</a></h3>
<p>To write a clip as a video file, use</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_clip</span><span class="o">.</span><span class="n">write_videofile</span><span class="p">(</span><span class="s2">&quot;movie.mp4&quot;</span><span class="p">)</span> <span class="c1"># default codec: &#39;libx264&#39;, 24 fps</span>
<span class="n">my_clip</span><span class="o">.</span><span class="n">write_videofile</span><span class="p">(</span><span class="s2">&quot;movie.mp4&quot;</span><span class="p">,</span><span class="n">fps</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">my_clip</span><span class="o">.</span><span class="n">write_videofile</span><span class="p">(</span><span class="s2">&quot;movie.webm&quot;</span><span class="p">)</span> <span class="c1"># webm format</span>
<span class="n">my_clip</span><span class="o">.</span><span class="n">write_videofile</span><span class="p">(</span><span class="s2">&quot;movie.webm&quot;</span><span class="p">,</span><span class="n">audio</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># don&#39;t render audio.</span>
</pre></div>
</div>
<p>MoviePy has default codec names for the most common file extensions. If you want to use exotic formats or if you are not happy with the defaults you can provide the codec with <code class="docutils literal notranslate"><span class="pre">codec='mpeg4'</span></code> for instance. There are many many options when you are writing a video (bitrate, parameters of the audio writing, file size optimization, number of processors to use, etc.). Please refer to <a class="reference internal" href="../ref/VideoClip/VideoClip.html#moviepy.video.VideoClip.VideoClip.write_videofile" title="moviepy.video.VideoClip.VideoClip.write_videofile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_videofile()</span></code></a> for more.</p>
<p>Sometimes it is impossible for MoviePy to guess the <code class="docutils literal notranslate"><span class="pre">duration</span></code> attribute of the clip (keep in mind that some clips, like ImageClips displaying a picture, have <em>a priori</em> an infinite duration). Then, the <code class="docutils literal notranslate"><span class="pre">duration</span></code> must be set manually with <code class="docutils literal notranslate"><span class="pre">clip.set_duration</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make a video showing a flower for 5 seconds</span>
<span class="n">my_clip</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="s2">&quot;flower.jpeg&quot;</span><span class="p">)</span> <span class="c1"># has infinite duration</span>
<span class="n">my_clip</span><span class="o">.</span><span class="n">write_videofile</span><span class="p">(</span><span class="s2">&quot;flower.mp4&quot;</span><span class="p">)</span> <span class="c1"># Will fail ! NO DURATION !</span>
<span class="n">my_clip</span><span class="o">.</span><span class="n">set_duration</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">write_videofile</span><span class="p">(</span><span class="s2">&quot;flower.mp4&quot;</span><span class="p">)</span> <span class="c1"># works !</span>
</pre></div>
</div>
</div>
<div class="section" id="animated-gifs">
<h3>Animated GIFs<a class="headerlink" href="#animated-gifs" title="Permalink to this headline">¶</a></h3>
<p>To write your video as an animated GIF, use</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_clip</span><span class="o">.</span><span class="n">write_gif</span><span class="p">(</span><span class="s1">&#39;test.gif&#39;</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that this requires ImageMagick installed. Otherwise you can also create the GIF with ffmpeg by adding the option <code class="docutils literal notranslate"><span class="pre">program='ffmpeg'</span></code>, it will be much faster but won’t look as nice and won’t be optimized.</p>
<p>There are many options to optimize the quality and size of a gif. Please refer to <a class="reference internal" href="../ref/VideoClip/VideoClip.html#moviepy.video.VideoClip.VideoClip.write_gif" title="moviepy.video.VideoClip.VideoClip.write_gif"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_gif()</span></code></a>.</p>
<p>Note that for editing gifs the best way is to preview them in the notebook as explained here: <a class="reference internal" href="efficient_moviepy.html#ipython-display"><span class="std std-ref">ipython_display</span></a></p>
<p>For examples of use, see <a class="reference external" href="https://zulko.github.io/blog/2014/01/23/making-animated-gifs-from-video-files-with-python">this blog post</a> for informations on making GIFs from video files, and <a class="reference external" href="https://zulko.github.io/blog/2014/09/20/vector-animations-with-python/">this other post</a> for GIF animations with vector graphics.</p>
</div>
<div class="section" id="export-images">
<h3>Export images<a class="headerlink" href="#export-images" title="Permalink to this headline">¶</a></h3>
<p>You can write a frame to an image file with</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myclip</span><span class="o">.</span><span class="n">save_frame</span><span class="p">(</span><span class="s2">&quot;frame.png&quot;</span><span class="p">)</span> <span class="c1"># by default the first frame is extracted</span>
<span class="n">myclip</span><span class="o">.</span><span class="n">save_frame</span><span class="p">(</span><span class="s2">&quot;frame.jpeg&quot;</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="s1">&#39;01:00:00&#39;</span><span class="p">)</span> <span class="c1"># frame at time t=1h</span>
</pre></div>
</div>
<p>If the clip has a mask it will be exported as the alpha layer of the image unless you specify <code class="docutils literal notranslate"><span class="pre">withmask=False</span></code>.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../gallery.html" class="btn btn-neutral float-right" title="Gallery" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="audioclips.html" class="btn btn-neutral float-left" title="Audio in MoviePy" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2017, Zulko.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>